{% extends "portfolio_app/base_template.html" %}

{% block content %}
<div class="row">
    <div class="col-12">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'index' %}">Home</a></li>
                <li class="breadcrumb-item active">{{ portfolio.title }}</li>
            </ol>
        </nav>
        
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1 class="display-5">{{ portfolio.title }}</h1>
            <div>
                <span class="badge {% if portfolio.is_active %}bg-success{% else %}bg-secondary{% endif %} me-2">
                    {{ portfolio.is_active|yesno:"Active,Inactive" }}
                </span>
                {% if perms.portfolio_app.change_portfolio %}
                <a href="{% url 'portfolio_update' portfolio.id %}" class="btn btn-warning">
                    <i class="fas fa-edit me-2"></i>Edit Portfolio
                </a>
                {% endif %}
                {% if perms.portfolio_app.delete_portfolio %}
                <a href="{% url 'portfolio_delete' portfolio.id %}" class="btn btn-danger">
                    <i class="fas fa-trash me-2"></i>Delete
                </a>
                {% endif %}
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>About</h5>
            </div>
            <div class="card-body">
                <p class="card-text">{{ portfolio.about|linebreaks }}</p>
                
                <div class="row mt-4">
                    <div class="col-md-6">
                        <p><strong><i class="fas fa-envelope me-2"></i>Contact Email:</strong> {{ portfolio.contact_email }}</p>
                    </div>
                    {% if student %}
                    <div class="col-md-6">
                        <p><strong><i class="fas fa-user me-2"></i>Student:</strong> <a href="{% url 'student_detail' student.id %}">{{ student.name }}</a></p>
                        <p><strong><i class="fas fa-book me-2"></i>Major:</strong> {{ student.get_major_display }}</p>
                        <p><strong><i class="fas fa-envelope me-2"></i>Email:</strong> {{ student.email }}</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-between align-items-center mt-4 mb-3">
            <h2><i class="fas fa-tasks me-2"></i>Projects</h2>
            <span class="badge bg-primary fs-6">{{ projects|length }} Projects</span>
        </div>
        
        {% if projects %}
            <div class="row">
                {% for project in projects %}
                <div class="col-md-6 mb-3">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">{{ project.title }}</h5>
                            <p class="card-text">{{ project.description|truncatewords:30 }}</p>
                            <a href="{% url 'project_detail' project.id %}" class="btn btn-primary">View Details</a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="alert alert-info text-center py-4">
                <i class="fas fa-info-circle fa-2x mb-3"></i>
                <h4>No Projects</h4>
                <p class="mb-2">No projects in this portfolio yet.</p>
                {% if perms.portfolio_app.add_project %}
                <a href="{% url 'project_create' %}" class="btn btn-primary mt-2">Add a project</a>
                {% endif %}
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}